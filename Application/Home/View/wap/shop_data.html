<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no">
    <meta http-equiv="Cache-Control" content="max-age=0">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>小店</title>
    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" type="text/css" href="css/page.css">
    <script src='js/jquery-1.9.0.min.js'></script>	
   <!-- <script src="js/jquery.mobile-1.4.3.min.js"></script>-->
</head>
	<body>
		<div class="shop-data-head">
			<h2>嘉泰国际大厦店</h2>
			<p class="text"><span>店主：齐德龙</span><span>电话：010-7786543</span></p>
		</div>
		<div class="shop-position">
			<p class="shop-posi">地址：<span></span><em class="shop-posi-btn cr">位置</em></p>
			<p class="shop-text">北京市朝阳区嘉泰国际大厦B座1003</p>
		</div>
		<ul class="set-send-pserson" id="set-send-pserson">
			<li class="clearfix"><label class="send-manage cl">派送管理</label><span class="cr">新增</span></li>
			<li class="list clearfix ">
				<p class="cl"><span class="name-phone cl"><strong>王强</strong><strong>13811345678</strong></span><span class="wechat-btn cr"><em>绑定微信</em></span><strong class="delete-btn">删除</strong></p>
			</li>
			<li class="list clearfix ">
				<p class="clearfix cl"><span class="name-phone cl"><strong>王强</strong><strong>13811345678</strong></span><span class="wechat-btn cr"><em>绑定微信</em></span><strong class="delete-btn">删除</strong></p>
			</li>
			<li class="list clearfix ">
				<p class="clearfix cl"><span class="name-phone cl"><strong>王强</strong><strong>13811345678</strong></span><span class="wechat-btn cr"><em>绑定微信</em></span><strong class="delete-btn">删除</strong></p>
			</li>
			<li class="list clearfix ">
				<p class="clearfix cl"><span class="name-phone cl"><strong>王强</strong><strong>13811345678</strong></span><span class="wechat-btn cr"><em>绑定微信</em></span><strong class="delete-btn">删除</strong></p>
			</li>
		</ul>
	</body>
</html>
<script>
$(function(){
	function prevent_default(e) {
        e.preventDefault();
    }

    function disable_scroll() {
        $(document).on('touchmove', prevent_default);
    }

    function enable_scroll() {
        $(document).unbind('touchmove', prevent_default)
    }

	var x;
    $('#set-send-pserson .list > p')
    .on('touchstart', function(e) {
           console.log($('#set-send-pserson .list > p'));
           	$('#set-send-pserson .list > p').animate({'margin-left': 0}, 200); 
            $(e.currentTarget).addClass('open');
            x = e.originalEvent.targetTouches[0].pageX;
        })
        .on('touchmove', function(e) {
            var change = e.originalEvent.targetTouches[0].pageX - x;
            if(change>0) return false;
            change = Math.min(Math.max(-50, change), 50) ;
            e.currentTarget.style.marginLeft = change + 'px';
            if (change < -10) disable_scroll() ;
        })
        .on('touchend', function(e) {
            var left = parseInt(e.currentTarget.style.marginLeft);
            var new_left;
            if (left < -35) {
                new_left = '-50px';
            }else{
                new_left = '0px';
            }
            // e.currentTarget.style.left = new_left
            $(e.currentTarget).animate({'margin-left': new_left}, 200);
            enable_scroll();
        });

    $('li .delete-btn').on('touchend', function(e) {
        e.preventDefault()
        $(this).parents('li').slideUp('fast', function() {
            $(this).remove()
        })
    })

    $('li .edit-btn').on('touchend', function(e) {
        e.preventDefault()
        $(this).parents('li').children('a').html('edited')
    })

})
</script>
